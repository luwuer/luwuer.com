/*!
 * @auther 莫得盐
 * @version 1.0.0
 * @info hash:5b27168598d237ee8b91, chunkhash:54fcfa2325915e3e1c19, name:pixel/board, filebase:board.7f621.chunk.js, query:, file:pixel/board.7f621.chunk.js
 */
(window.webpackJsonp_pixel=window.webpackJsonp_pixel||[]).push([[1],{105:function(t,e){},108:function(t,e,o){"use strict";var i=o(22);o.n(i).a},109:function(t,e,o){(t.exports=o(5)(!1)).push([t.i,".palette-wrapper {\n  position: relative;\n  -webkit-box-sizing: content-box;\n          box-sizing: content-box;\n  display: inline-block;\n  -webkit-box-shadow: 2px 3px 4px rgba(51,51,51,0.2);\n          box-shadow: 2px 3px 4px rgba(51,51,51,0.2);\n  border: 1px solid #eee;\n  overflow: hidden;\n  font-size: 0;\n}\n.palette-wrapper .test {\n  display: block;\n  background: #fff;\n  cursor: default;\n  outline: none;\n  -webkit-tap-highlight-color: rgba(255,255,255,0);\n}\n.palette-wrapper .hidden {\n  position: fixed;\n  top: 0;\n  left: 0;\n  visibility: hidden;\n}\n.palette-wrapper .popre {\n  position: absolute;\n}\n.palette-wrapper .load-info {\n  position: absolute;\n  bottom: 0;\n  padding-left: 12px;\n  padding-bottom: 12px;\n  line-height: 18px;\n  font-size: 12px;\n  color: #455;\n  -webkit-transition: all 0.7s;\n  transition: all 0.7s;\n}\n.palette-wrapper .load-info>p:last-child {\n  position: relative;\n  -webkit-animation: info-shake 0.3s infinite;\n          animation: info-shake 0.3s infinite;\n}\n@-webkit-keyframes info-shake {\n0% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n}\n100% {\n    -webkit-transform: scale(1.1);\n            transform: scale(1.1);\n    left: 2px;\n}\n}\n@keyframes info-shake {\n0% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n}\n100% {\n    -webkit-transform: scale(1.1);\n            transform: scale(1.1);\n    left: 2px;\n}\n}\n.palette-wrapper .load-info-hide {\n  opacity: 0;\n}\n.el-popover .content {\n  min-height: 19px;\n}\n.el-popover .content .content-item .user {\n  font-weight: 700;\n}\n",""])},110:function(t,e,o){"use strict";var i=o(23);o.n(i).a},111:function(t,e,o){(t.exports=o(5)(!1)).push([t.i,".login-box {\n  margin-bottom: 12px;\n  font-size: 14px;\n  color: #555;\n}\n.login-box .registered {\n  padding: 12px 12px 8px;\n  -webkit-box-shadow: 0px 2px 4px rgba(51,51,51,0.2);\n          box-shadow: 0px 2px 4px rgba(51,51,51,0.2);\n  border-radius: 6px;\n}\n.login-box .registered .name {\n  font-weight: bold;\n}\n",""])},112:function(t,e,o){"use strict";var i=o(24);o.n(i).a},113:function(t,e,o){(t.exports=o(5)(!1)).push([t.i,".notice-box {\n  font-size: 14px;\n  padding: 6px 12px;\n  background-color: #f4f4f5;\n  color: #909399;\n  margin-bottom: 12px;\n  border-radius: 4px;\n}\n.notice-box .icon {\n  font-size: 18px;\n  color: #f33;\n}\n.notice-box .content-expand {\n  padding-left: 22px;\n  padding-top: 6px;\n}\n",""])},137:function(t,e,o){t.exports=o(1)(97)},138:function(t,e,o){"use strict";var i=o(35);o.n(i).a},139:function(t,e,o){(t.exports=o(5)(!1)).push([t.i,"#chat {\n  position: relative;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  padding-bottom: 100px;\n  -webkit-box-shadow: 0px 2px 4px rgba(51,51,51,0.2);\n          box-shadow: 0px 2px 4px rgba(51,51,51,0.2);\n  border-radius: 6px;\n  font-size: 14px;\n}\n#chat .display {\n  overflow: auto;\n}\n#chat .display .msgs .msg-list {\n  padding: 8px 12px;\n  line-height: 18px;\n}\n#chat .display .msgs .msg-list .user {\n  font-weight: 700;\n}\n#chat .display .msgs .msg-list .talk-way {\n  display: inline-block;\n  padding: 2px 6px;\n  border-radius: 5px;\n  line-height: 14px;\n  color: #fff;\n}\n#chat .display .msgs .msg-list .icon {\n  position: relative;\n  top: 1px;\n  color: #f66;\n  font-size: 16px;\n  -webkit-transform: scale(1.4);\n          transform: scale(1.4);\n}\n#chat .display .msgs .msg-list .content {\n  color: #333;\n}\n#chat .el-textarea {\n  position: absolute;\n  bottom: 0;\n  box-size: border-box;\n  height: 100px;\n  border-top: 1px solid rgba(153,153,153,0.4);\n}\n#chat .el-textarea textarea {\n  font-family: Microsoft YaHei !important;\n  font-size: 14px;\n  resize: none;\n  border: none;\n}\n",""])},140:function(t,e,o){"use strict";var i=o(36);o.n(i).a},141:function(t,e,o){(t.exports=o(5)(!1)).push([t.i,"#board[data-v-ae2cd4e6] {\n  position: relative;\n  display: inline-block;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  width: 1920px;\n  padding-left: 120px;\n  padding-right: 120px;\n  text-align: left;\n}\n#board .color-pick-wrapper[data-v-ae2cd4e6] {\n  width: 1024px;\n  margin-top: 24px;\n  margin-bottom: 12px;\n  -webkit-box-shadow: 2px 3px 4px rgba(51,51,51,0.2);\n          box-shadow: 2px 3px 4px rgba(51,51,51,0.2);\n  border-radius: 4px;\n}\n#board .left-wrapper[data-v-ae2cd4e6] {\n  position: absolute;\n  right: 120px;\n  top: 24px;\n  width: 640px;\n}\n",""])},142:function(t,e,o){"use strict";o.r(e);var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"board"}},[o("div",{staticClass:"color-pick-wrapper"},[o("s-color-picker",{model:{value:t.color,callback:function(e){t.color=e},expression:"color"}})],1),t._v(" "),o("s-canvas",{attrs:{color:t.color}}),t._v(" "),o("div",{staticClass:"left-wrapper"},[o("notice"),t._v(" "),o("login",{attrs:{userName:t.userName}}),t._v(" "),o("chat",{attrs:{height:t.chartHeight}})],1)],1)};i._withStripped=!0;var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{style:{"border-top":"4px solid "+t.value},attrs:{id:"sColorPicker"}},[o("div",{staticClass:"default-plate"},[o("span",{staticClass:"label"},[t._v("选取颜色")]),t._v(" "),o("ul",{staticClass:"color-wrapper"},[t._l(t.defaults,function(e,i){return o("li",{key:i,staticClass:"color-item",style:{background:e,border:t.renderBorder(e)?"1px solid #eee":"none"},on:{click:function(o){return t.pick(e)}}})}),t._v(" "),o("li",{staticClass:"color-item more-color",style:{border:t.renderBorder(t.csutomerColor)?"1px solid #eee":"none"},attrs:{title:"自定义颜色"}},[o("el-color-picker",{model:{value:t.csutomerColor,callback:function(e){t.csutomerColor=e},expression:"csutomerColor"}})],1)],2)]),t._v(" "),o("div",{staticClass:"history-plate"},[o("span",{staticClass:"label"},[t._v("历史颜色")]),t._v(" "),o("ul",{staticClass:"color-wrapper"},t._l(t.histories,function(e,i){return o("li",{key:i,staticClass:"color-item",style:{background:e,border:t.renderBorder(e)?"1px solid #eee":"none"},on:{click:function(o){return t.pick(e)}}})}),0)])])};s._withStripped=!0;var n=function(t,e){e=JSON.stringify(e)+"";let o=encodeURIComponent(e);localStorage.setItem(t,o)},r=function(t){let e=localStorage.getItem(t);if(e){let t=decodeURIComponent(e).split("").join("");return JSON.parse(t)}return!1};const a=["#ffffff","#e4e4e4","#888888","#222222","#FF6666","#FF3333","#FF0000","#FFCC66","#FF9933","#FF9900","#FFFF66","#FFFF33","#FFFF00","#33FF66","#33CC33","#339900","#99FF99","#66FF99","#00CC99","#33FFFF","#3399FF","#3333FF","#ffa7d1","#cf6ee4","#820080"];var l={name:"sColorPicker",props:{value:{type:String,default:"#ffffff"}},data:()=>({defaults:a,histories:[],csutomerColor:"#ff0000"}),computed:{},methods:{init(){let t=r("history-colors");console.log(t),t&&t.length&&(this.histories=t||[],this.$emit("input",this.histories[0]),this.csutomerColor=this.histories[0]),document.addEventListener("visibilitychange",()=>{"visible"===document.visibilityState?document.title="pixel-palette-visible":document.title="pixel-palette-hidden"}),window.addEventListener("unload",()=>{n("history-colors",this.histories)})},pick(t){this.histories[0]!==t&&(this.histories.unshift(t),this.histories.splice(27,1)),this.csutomerColor=t,this.$emit("input",t)},renderBorder(t){let e=parseInt(t.slice(1,3),16),o=parseInt(t.slice(3,5),16),i=parseInt(t.slice(5,7),16);return e>238&&o>238&&i>238}},watch:{csutomerColor(t){null!==t?t!==this.value&&this.pick(t):this.csutomerColor="#ffffff"}},created(){this.init()}},c=(o(67),o(6)),h=Object(c.a)(l,s,[],!1,null,null,null);h.options.__file="src/modules/pixel/components/s-color-picker/main.vue";var p=h.exports,d=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{ref:"wrapper",staticClass:"palette-wrapper",style:t.wrapperStyle},[o("canvas",{ref:"cv",staticClass:"test",attrs:{width:t.width,height:t.height},on:{wheel:t.wheelHandler,mousedown:t.mousedownHandle,mousemove:t.mousemoveHandle,mouseout:t.mouseoutHandle,mouseup:t.mouseupHandle}}),t._v(" "),o("canvas",{ref:"_cv",staticClass:"hidden",attrs:{width:t.width,height:t.height}}),t._v(" "),o("div",{staticClass:"load-info",class:{"load-info-hide":t.loadInfoHide}},t._l(t.loadInfo,function(e,i){return o("p",{key:i},[t._v("\n      "+t._s(e)+"\n    ")])}),0),t._v(" "),o("el-popover",{attrs:{placement:"bottom",width:"200",trigger:"manual"},model:{value:t.popoverVisible,callback:function(e){t.popoverVisible=e},expression:"popoverVisible"}},[o("ul",{directives:[{name:"loading",rawName:"v-loading",value:t.infoLoad,expression:"infoLoad"}],staticClass:"content"},t._l(t.dotInfo,function(e,i){return o("li",{key:i,staticClass:"content-item"},[o("span",{staticClass:"no",style:{color:e.color,background:"#ffffff"===e.color?"#333":""}},[t._v("#"+t._s(e.no))]),t._v(" "),o("span",[t._v("Created by "),o("span",{staticClass:"user"},[t._v(t._s(e.user))])])])}),0),t._v(" "),o("span",{staticClass:"popre",style:t.popreStyle,attrs:{slot:"reference"},slot:"reference"})])],1)};d._withStripped=!0;var u=o(69),f=o.n(u);f.a.interceptors.request.use(t=>t,t=>Promise.reject(t)),f.a.interceptors.response.use(t=>(t.data&&"string"==typeof t.data&&(t.data=JSON.parse(t.data)),function(t){if(!t||200!==t.status||-1===t.data.code)return Promise.reject("请求错误");return t.data}(t)),t=>Promise.reject(t));var x={get:(t,e={})=>f()({method:"get",baseURL:window.config.baseUrl,url:t,params:e,timeout:6e4,headers:{}}),post:(t,e={})=>f()({method:"post",baseURL:window.config.baseUrl,url:t,data:e,timeout:6e4,headers:{}})};var m=o(86),g=o.n(m);class w{constructor(t=0,e=0){this.x=t,this.y=e}setX(t,e=0){t<0&&(t=0);let o=1024-e;t>o&&(t=o),this.x=t}setY(t,e=0){t<0&&(t=0);let o=512-e;t>o&&(t=o),this.y=t}}var b={name:"index",components:{sColorPicker:p},props:{color:String,imageData:Object},data:()=>({imageObject:new Image,dragFlag:!1,mousedownFlag:!1,ratioLevel:window.config.pixel.RATIO.levelMin,ratio:window.config.pixel.RATIO.levelInfos[0],lastResetDot:null,moveLastPosition:{x:0,y:0},mousePosition:{},popoverVisible:!1,dotInfo:[],infoLoad:!1,loadInfo:[],loadInfoHide:!1}),computed:{user(){return this.$store.getters.pixelUserName},canDraw(){return this.ratioLevel!==window.config.pixel.RATIO.levelMin},renderX(){return this.width/this.ratio},renderY(){return this.height/this.ratio},wrapperStyle:()=>`width: ${window.config.pixel.WIDTH}px; height: ${window.config.pixel.HEIGHT}px`,colorRGBA(){return[parseInt(this.color.slice(1,3),16),parseInt(this.color.slice(3,5),16),parseInt(this.color.slice(5,7),16),255]},popreStyle(){if(this.mousePosition)return{left:this.mousePosition.x+"px",top:this.mousePosition.y+"px"}}},methods:{init(){this.removeImgSmooth(this.ctx),this.removeImgSmooth(this._ctx),this.imageObject.onload=()=>{this.ctx.drawImage(this.imageObject,0,0),this._ctx.drawImage(this.imageObject,0,0),this.loadInfo.push(`吃${["栗子","腰果","花生","杏仁","核桃","瓜子","榛子","开心果","巴旦木","松仁"][Math.floor(10*Math.random())]}...`),this.loadInfoHide=!0,this.resourceData=this._ctx.getImageData(0,0,this.width,this.height),this.imageObject.onload=null}},drawDot({x:t,y:e,color:o=this.color,save:i=!1}){this.ctx.fillStyle=o||this.color,this.ctx.fillRect(t,e,1,1),this.index=(e+this.startDot.y)*this.width+t+this.startDot.x,i&&this.saveDot({x:t+this.startDot.x,y:e+this.startDot.y,color:o})},saveDot({x:t,y:e,color:o=this.colorRGBA},i=!0){if(this._ctx.fillStyle=o,this._ctx.fillRect(t,e,1,1),this.imageObject.src=this.$refs._cv.toDataURL(),this.resourceData=this._ctx.getImageData(0,0,this.width,this.height),i){let i=[];this.tranHexColorToRgb(o,i);let s={index:e*this.width+t,color:o,user:this.user,r:i[0],g:i[1],b:i[2]};window.socket.emit("saveDot",s)}},resetDot(){this.drawDot({x:this.lastResetDot.x,y:this.lastResetDot.y,color:this.lastResetDot.color}),this.lastResetDot=null},tranHexColorToRgb(t,e=[]){let o=t.match(/\w{2}/g),i=parseInt(o[0],16),s=parseInt(o[1],16),n=parseInt(o[2],16);return e.push(i,s,n,255),`rgba(${i}, ${s}, ${n})`},tranArrToColor:t=>`rgba(${void 0===t[0]?255:t[0]}, ${void 0===t[1]?255:t[1]}, ${void 0===t[2]?255:t[2]}, ${void 0===t[3]?255:t[3]})`,getCurrentColor(t,e){let o=4*(this.resourceData.width*e+t),i=o+4,s=this.resourceData.data.slice(o,i);return this.tranArrToColor(s)},largen(t){if(this.ratioLevel<window.config.pixel.RATIO.levelMax){this.ratioLevel++;let e=window.config.pixel.RATIO.levelInfos[this.ratioLevel]/this.ratio,o=Math.floor((t.clientX-this.boardInfo.left)/this.ratio)+(this.startDot?this.startDot.x:0),i=Math.floor((t.clientY-this.boardInfo.top)/this.ratio)+(this.startDot?this.startDot.y:0);this.ratio=window.config.pixel.RATIO.levelInfos[this.ratioLevel],this.startDot=new w;let s=this.renderX/2,n=s-1;o>s?o+n<this.width?this.startDot.setX(o-s):this.startDot.setX(this.width-this.renderX):this.startDot.setX(0);let r=this.renderY/2,a=r-1;i>r?i+a<this.height?this.startDot.setY(i-r):this.startDot.setY(this.height-this.renderY):this.startDot.setY(0),this.ctx.scale(e,e),this.ctx.drawImage(this.imageObject,this.startDot.x,this.startDot.y,this.renderX,this.renderY,0,0,this.renderX,this.renderY)}},shrink(t){if(this.ratioLevel>window.config.pixel.RATIO.levelMin){this.ratioLevel--;let e=window.config.pixel.RATIO.levelInfos[this.ratioLevel]/this.ratio,o=Math.floor((t.clientX-this.boardInfo.left)/this.ratio)+this.startDot.x,i=Math.floor((t.clientY-this.boardInfo.top)/this.ratio)+this.startDot.y;this.ratio=window.config.pixel.RATIO.levelInfos[this.ratioLevel],this.startDot.setX(o-this.renderX/2,this.renderX),this.startDot.setY(i-this.renderY/2,this.renderY),this.ctx.scale(e,e),this.ctx.drawImage(this.imageObject,this.startDot.x,this.startDot.y,this.renderX,this.renderY,0,0,this.renderX,this.renderY)}},removeImgSmooth(t){t.mozImageSmoothingEnabled=!1,t.webkitImageSmoothingEnabled=!1,t.msImageSmoothingEnabled=!1,t.imageSmoothingEnabled=!1},getRealMove(t){let e=t.x-this.moveLastPosition.x,o=t.y-this.moveLastPosition.y;return this.moveLastPosition.x=t.x,this.moveLastPosition.y=t.y,{x:e,y:o}},mousedownHandle(t){this.canDraw&&(this.mousedownFlag=!0,this.dragFlag=!1,this.moveLastPosition.x=t.clientX,this.moveLastPosition.y=t.clientY,this.lastResetDot=null)},mousemoveHandle(t){if(this.mousePosition={x:t.offsetX,y:t.offsetY},this.canDraw)if(this.mousedownFlag){let e=this.moveLastPosition.x-t.clientX,o=this.moveLastPosition.y-t.clientY,i=e>0?Math.floor(e/this.ratio):Math.ceil(e/this.ratio),s=o>0?Math.floor(o/this.ratio):Math.ceil(o/this.ratio);(i||s)&&(this.dragFlag=!0,this.moveLastPosition.x=t.clientX,this.moveLastPosition.y=t.clientY,this.startDot.setX(this.startDot.x+i,this.renderX),this.startDot.setY(this.startDot.y+s,this.renderY),this.ctx.drawImage(this.imageObject,this.startDot.x,this.startDot.y,this.renderX,this.renderY,0,0,this.renderX,this.renderY))}else{let e=Math.floor(t.offsetX/this.ratio),o=Math.floor(t.offsetY/this.ratio);if(null!==this.lastResetDot){if(this.lastResetDot.x===e&&this.lastResetDot.y===o)return;this.resetDot()}let i=this.getCurrentColor(e+this.startDot.x,o+this.startDot.y);this.lastResetDot={x:e,y:o,color:i},this.drawDot({x:e,y:o})}},mouseoutHandle(){this.mousedownFlag=!1,null!==this.lastResetDot&&this.resetDot()},mouseupHandle(t){this.canDraw&&(this.user?this.dragFlag||(this.drawDot({x:Math.floor(t.offsetX/this.ratio),y:Math.floor(t.offsetY/this.ratio),color:this.color,save:!0}),this.lastResetDot=null):this.$notify.info({title:"提示",message:"请先填写常用昵称"}),this.mousedownFlag=!1,this.dragFlag=!1)},keydownHandle(t){this.canDraw&&(this.altDown||"Alt"===t.key&&(t.preventDefault(),this.altDown=!0,this.infoLoad=!0,(t=>x.get("/dotInfo",{index:t}).then(t=>t.data))(this.index).then(t=>{this.dotInfo=t.history,this.infoLoad=!1}),this.popoverVisible=!0))},keyupHandle(t){"Alt"===t.key&&(t.preventDefault(),this.altDown=!1,this.popoverVisible=!1)},wheelHandler(t){t.wheelDelta?(t.wheelDelta>0&&this.largen(t),t.wheelDelta<0&&this.shrink(t)):t.detail&&(t.detail>0&&this.largen(t),t.detail<0&&this.shrink(t))}},watch:{},created(){this.loadInfo.push("画布初始化..."),this.width=window.config.pixel.WIDTH,this.height=window.config.pixel.HEIGHT,window.socket=g.a.connect(window.location.origin.replace(/https/,"wss")),this.loadInfo.push("加载历史数据..."),window.socket.on("dataUrl",t=>{this.imageObject.src=t.url,this.loadInfo.push("渲染图像..."),this.init()}),window.socket.on("newDot",t=>{this.saveDot({x:t.index%this.width,y:Math.floor(t.index/this.width),color:t.color},!1)})},mounted(){this.$nextTick(()=>{this.ctx=this.$refs.cv.getContext("2d"),this._ctx=this.$refs._cv.getContext("2d");let t=this.$refs.cv.getBoundingClientRect();this.boardInfo={left:t.x,top:t.y},this.$refs.wrapper.click(),document.addEventListener("keydown",this.keydownHandle),document.addEventListener("keyup",this.keyupHandle)})}},v=(o(108),Object(c.a)(b,d,[],!1,null,null,null));v.options.__file="src/modules/pixel/components/s-canvas/test.vue";var y=v.exports,k=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{ref:"wrapper",staticClass:"login-box"},[t.userName?o("div",{staticClass:"registered"},[o("span",[t._v(t._s(t.jokes[Math.floor(Math.random()*t.jokes.length)])+"@")]),o("span",{staticClass:"name"},[t._v(t._s(t.userName))])]):o("div",{staticClass:"unregistered"},[o("el-row",{attrs:{gutter:12}},[o("el-col",{attrs:{span:20}},[o("el-input",{attrs:{minlength:1,maxlength:20,placeholder:"请输入你的常用昵称"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.register(e)}},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),t._v(" "),o("el-col",{attrs:{span:4}},[o("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:t.register}},[t._v("Submit")])],1)],1)],1)])};k._withStripped=!0;var C={name:"login-box",props:{userName:String},data:()=>({name:""}),computed:{jokes(){return this.$store.getters.pixelJokes}},methods:{register(){this.name&&(t=>x.post("/user/register",{name:t}).then(t=>t))(this.name).then(t=>{4001!==t.code&&(0!==t.code&&this.$notify.error({title:"错误",message:t.msg}),this.$store.commit("pixelSetName",t.name),this.$notify({title:"成功",message:`您是本画板的第${t.count}位注册用户，快在画板上留下你的作品吧~`,type:"success"}))})}},mounted(){this.$store.commit("pixelSetLoginHeight",this.$refs.wrapper.offsetHeight)}},_=(o(110),Object(c.a)(C,k,[],!1,null,null,null));_.options.__file="src/modules/pixel/views/board/login.vue";var D=_.exports,I=function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.content?o("div",{ref:"wrapper",staticClass:"notice-box"},[o("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[o("use",{attrs:{"xlink:href":"#icon-tixing"}})]),t._v(" "),o("span",{staticClass:"content"},[t._v(t._s(t.renderContent[0]))]),t._v(" "),t._l(t.renderContent.slice(1),function(e,i){return o("p",{key:i,staticClass:"content-expand"},[t._v(t._s(e))])})],2):t._e()};I._withStripped=!0;var P={name:"notice-box",computed:{content(){return this.$store.getters.pixelNotice},renderContent(){return this.content.split("\n")}},watch:{content(t){t&&this.$nextTick(()=>{this.$store.commit("pixelSetNoticeHeight",this.$refs.wrapper.offsetHeight)})}}},F=(o(112),Object(c.a)(P,I,[],!1,null,null,null));F.options.__file="src/modules/pixel/views/board/notice.vue";var O=F.exports,$=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{style:{height:t.height+"px"},attrs:{id:"chat"}},[t.pixelTalkWays.length?o("div",{directives:[{name:"scrollBottom",rawName:"v-scrollBottom"}],staticClass:"display",style:{height:t.height-101+"px"}},[o("ul",{staticClass:"msgs"},t._l(t.msgs,function(e,i){return o("li",{key:i,staticClass:"msg-list"},[o("span",{staticClass:"user"},[t._v(t._s(e.user))]),t._v(" "),o("span",{staticClass:"talk-way",style:{background:t.randomColor(e.way)}},[t._v(t._s(e.way))]),t._v(" "),o("svg",{staticClass:"icon",style:{color:t.randomColor.color},attrs:{"aria-hidden":"true"}},[o("use",{attrs:{"xlink:href":"#icon-gonggao"}})]),t._v(" "),o("span",{staticClass:"content"},[t._v(" "+t._s(e.content))])])}),0)]):t._e(),t._v(" "),o("div",{staticClass:"input"},[o("el-input",{attrs:{type:"textarea",placeholder:"既然讲话好听，就多讲一点( ctrl + enter 发送)",rows:4,autosize:!1},nativeOn:{keydown:function(e){return t.send(e)},keyup:function(e){return t.keyupHandle(e)}},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}})],1)])};$._withStripped=!0;o(114);var S=o(137);function H(t,e){var o=Object.keys(t);return Object.getOwnPropertySymbols&&o.push.apply(o,Object.getOwnPropertySymbols(t)),e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),o}function L(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}const j=["#888888","#FF6666","#FFCC66","#00cc99","#33cc34","#6DE3E3","#3399FF","#cf6ee4"];var R={name:"chat",data:()=>({input:"",msgs:[],ctrlDown:!1}),computed:function(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?H(o,!0).forEach(function(e){L(t,e,o[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):H(o).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))})}return t}({},Object(S.mapGetters)(["pixelNoticeHeight","pixelLoginHeight","pixelTalkWays","pixelUserName"]),{height(){return 586-this.pixelNoticeHeight-this.pixelLoginHeight}}),methods:{init(){(()=>x.get("/chartHistory"))().then(t=>{this.msgs=t.data.reverse()}),window.socket.on("newChat",t=>{50===this.msgs.length&&this.msgs.shift(),this.msgs.push(t)})},randomColor(t){if("娇喘"===t)return this.randomColor.color="#ffa7d1","#ffa7d1";if("失去生殖器"===t)return this.randomColor.color="#B70404","#B70404";let e=j[Math.floor(Math.random()*j.length)];return this.randomColor.color=e,e},randomTalkWay(){return this.pixelTalkWays[Math.floor(Math.random()*this.pixelTalkWays.length)]},send(t){if("Control"===t.key)t.preventDefault(),this.ctrlDown=!0;else if("Enter"===t.key){if(!this.ctrlDown)return;if(!this.pixelUserName)return t.preventDefault(),void this.$notify.info({title:"提示",message:"请先填写常用昵称"});let e=this.randomTalkWay();"娇喘"!==e&&"失去生殖器"!==e||(e=this.randomTalkWay()),((t,e,o)=>{let i=(new Date).getTime();window.socket.emit("newChat",{timestamp:i,content:t,user:e,way:o})})(this.input,this.pixelUserName,e),this.input=""}},keyupHandle(t){"Control"===t.key&&(this.ctrlDown=!1)}},created(){this.init()}},T=(o(138),Object(c.a)(R,$,[],!1,null,null,null));T.options.__file="src/modules/pixel/views/board/chat.vue";var M={name:"index",components:{SColorPicker:p,SCanvas:y,login:D,notice:O,chat:T.exports},data:()=>({color:"#333333",chartHeight:0}),computed:{userName(){return this.$store.getters.pixelUserName}},methods:{init(){(()=>x.get("/sysInfo").then(t=>t.data))().then(t=>{this.$store.commit("pixelSetNotice",t.notice),this.$store.commit("pixelSetJokes",t.sbJokes),this.$store.commit("pixelSetTalkWays",t.talkWays)})}},created(){this.init()},mounted(){this.$}},Y=(o(140),Object(c.a)(M,i,[],!1,null,"ae2cd4e6",null));Y.options.__file="src/modules/pixel/views/board/main.vue";e.default=Y.exports},17:function(t,e,o){var i=o(68);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,o(10).default)("0a148dc2",i,!1,{})},22:function(t,e,o){var i=o(109);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,o(10).default)("3015815f",i,!1,{})},23:function(t,e,o){var i=o(111);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,o(10).default)("b241eb16",i,!1,{})},24:function(t,e,o){var i=o(113);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,o(10).default)("809d3a36",i,!1,{})},35:function(t,e,o){var i=o(139);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,o(10).default)("170319b6",i,!1,{})},36:function(t,e,o){var i=o(141);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,o(10).default)("30a88268",i,!1,{})},41:function(t,e,o){t.exports=o(1)(95)},48:function(t,e,o){t.exports=o(1)(16)},67:function(t,e,o){"use strict";var i=o(17);o.n(i).a},68:function(t,e,o){(t.exports=o(5)(!1)).push([t.i,"#sColorPicker {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n  text-align: left;\n}\n#sColorPicker .history-plate,\n#sColorPicker .default-plate {\n  -webkit-box-flex: 1;\n      -ms-flex: 1 1 auto;\n          flex: 1 1 auto;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: row;\n          flex-direction: row;\n  overflow: hidden;\n}\n#sColorPicker .history-plate .label,\n#sColorPicker .default-plate .label {\n  -webkit-box-flex: 0;\n      -ms-flex: 0 0 60px;\n          flex: 0 0 60px;\n  line-height: 32px;\n  font-size: 12px;\n}\n#sColorPicker .history-plate .color-wrapper,\n#sColorPicker .default-plate .color-wrapper {\n  -webkit-box-flex: 1;\n      -ms-flex: 1 1 auto;\n          flex: 1 1 auto;\n  height: 32px;\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n#sColorPicker .history-plate .color-wrapper .color-item,\n#sColorPicker .default-plate .color-wrapper .color-item {\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  display: inline-block;\n  height: 24px;\n  width: 24px;\n  margin-right: 12px;\n  border-radius: 6px;\n  cursor: pointer;\n  -webkit-transition: all 0.2s;\n  transition: all 0.2s;\n}\n#sColorPicker .history-plate .color-wrapper .color-item:hover,\n#sColorPicker .default-plate .color-wrapper .color-item:hover {\n  -webkit-transform: scale(1.2);\n          transform: scale(1.2);\n}\n#sColorPicker .history-plate .color-wrapper .color-item:last-child,\n#sColorPicker .default-plate .color-wrapper .color-item:last-child {\n  margin-right: 0;\n}\n#sColorPicker .history-plate .color-wrapper .color-item .el-color-picker,\n#sColorPicker .default-plate .color-wrapper .color-item .el-color-picker {\n  height: 24px;\n}\n#sColorPicker .history-plate .color-wrapper .color-item .el-color-picker .el-color-picker__trigger,\n#sColorPicker .default-plate .color-wrapper .color-item .el-color-picker .el-color-picker__trigger {\n  width: 54px;\n  height: 24px;\n  padding: 0;\n  border: none;\n}\n#sColorPicker .history-plate .color-wrapper .color-item .el-color-picker .el-color-picker__trigger .el-color-picker__color,\n#sColorPicker .default-plate .color-wrapper .color-item .el-color-picker .el-color-picker__trigger .el-color-picker__color {\n  border: none;\n}\n#sColorPicker .history-plate .color-wrapper .more-color,\n#sColorPicker .default-plate .color-wrapper .more-color {\n  width: 54px;\n  overflow: hidden;\n}\n#sColorPicker .history-plate .color-wrapper .more-color>input,\n#sColorPicker .default-plate .color-wrapper .more-color>input {\n  height: 24px;\n  width: 54px;\n  cursor: pointer;\n}\n",""])}}]);